{%- extends "base.html" -%}

{% block title %}{{list_ctx_name}} {{list_month_name}} {{list_year}}{% endblock %}

{% block header_h1 %}
<h1>
  <a href="/">arXiv.org</a> >
  <a href="{{url_for('.list_articles', context=list_ctx_id, subcontext='recent')}}">{{list_ctx_id}}</a>
  </h1>
{% endblock %}

{%- block content %}
<div id='content'>
<div id='dlpage'>

  <h1>{{list_ctx_name}}</h1>
  <h2>Authors and titles for {{list_month_name}} {{list_year}}</h2>

{{ page_divs() }}

<dl id='articles'>
  {% for article in articles %}
  {% set ids = article.arxiv_identifier.ids %}
  <dt>
    <a name='item{{loop.index}}'>[{{loop.index}}]</a>
    <a href ="{{url_for('.abstract', arxiv_id=ids)}}" title="Abstract">
      arXiv:{{ article.arxiv_identifier.ids }}
    </a>
    [<a href="{{url_for('.pdf', arxiv_id=ids)}}" title="Download PDF">pdf</a>,
     <a href="{{url_for('.ps', arxiv_id=ids)}}" title="Download PostScript">ps</a>,
     <a href="{{url_for('.format', arxiv_id=ids)}}" title="Other formats">other</a>]
  </dt>
  <dd>
    <div class='meta'>
      <div class='list-title mathjax'><span class='descriptor'>Title:</span>
        {{article.title}}
      </div>
      <div class='list-authors'>
        {{- do_author_list( article ) -}}
      </div>

      {% if article.comments %}
      <div class='list-comments mathjax''><span class='descriptor'>Comments:</span>
        {{article.comments}}
      </div>
      {% endif %}

      {% if article.journal_ref %}
      <div class='list-journal-ref'><span class='descriptor'>Journal-ref:</span>
        {{article.journal_ref}}
      </div>
      {% endif %}
      
      <div class='list-subjects'><span class='descriptor'>Subjects:</span>
        <span class='primary-subject'>{{article.primary_category.display_str()}}</span>
      </div>
        
    </div>
  </dd>  
  {% endfor %}
</dl>

{{ page_divs() }}
</div>
</div>

<pre> {% debug %}</pre>
{%- endblock %}



{%- macro page_divs() -%}
<div>[ total of {{count}} entries: TODO pages]</div>
<div>[ showing {{shown}} entries per page: TODO fewer | more | all]</div>
{%- endmacro -%}


{%- macro do_author_list(article) -%}
  {% set au_list_tup = author_links[article.arxiv_id_v] %}
  {%- if not au_list_tup or not au_list_tup[0] -%}
    (author list is unavailable)
  {%- else -%}    
    {%- for part in au_list_tup[0] -%}
      {%- if part is string -%}
        {{- part|arxiv_urlize -}}
      {%- else -%}        
        <a href="{{url_for_author_search(article, part[1])}}">{{part[0]}}</a>
      {%- endif -%}
    {% endfor %}    
  {%- endif -%}  
{%- endmacro -%}
