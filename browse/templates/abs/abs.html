{%- import "abs/abs_macros.html" as abs_macros %}
{%- extends "base.html" -%}

  {% block title %}[{{ requested_id }}] {{ abs_meta.title }}{% endblock %}

{% block head %}
  {{ super() -}}
  {%- if config['LABS_BIBEXPLORER_ENABLED'] -%}
  <link rel="stylesheet" media="screen" type="text/css" href="/bibex/bibex.css?20181010"/>
  {%- endif %}
  <script src="//static.arxiv.org/js/mathjaxToggle.min.js" type="text/javascript"></script>
  {{- generate_scholar_tags() }}
{% endblock head %}

{% block body_id %}{% endblock %}

{% block header_class %}{% endblock %}
{% block header %}
  <h1><a href="/">arXiv.org</a> &gt; <a href="{{url_for('.list_articles',context=abs_meta.primary_archive.id, subcontext='recent') }}">{{ abs_meta.primary_archive.id }}</a> &gt; arXiv:{{ requested_id }}</h1>
  <div id="search">
    <form id="search-arxiv" method="get" action="{{url_for('search_box')}}">

      <div class="wrapper-search-arxiv">
        <input class="keyword-field" type="text" name="query" placeholder="Search or Article ID" />

        <div class="filter-field">
          <select name="searchtype">
            <option value="all">All fields</option>
            <option value="title">Title</option>
            <option value="author">Author(s)</option>
            <option value="abstract">Abstract</option>
            <option value="comments">Comments</option>
            <option value="journal_ref">Journal reference</option>
            <option value="acm_class">ACM classification</option>
            <option value="msc_class">MSC classification</option>
            <option value="report_num">Report number</option>
            <option value="paper_id">arXiv identifier</option>
            <option value="doi">DOI</option>
            <option value="orcid">ORCID</option>
            <option value="author_id">arXiv author ID</option>
            <option value="help">Help pages</option>
            <option value="full_text">Full text</option>
          </select>
        </div>
        <input class="btn-search-arxiv" value="" type="submit">
        <div class="links">(<a href="{{url_for('help')}}">Help</a> | <a href="{{url_for('search_advanced')}}">Advanced search</a>)</div>
      </div>
    </form>
  </div>
{% endblock header %}

{%- block content %}
{%- include "abs/trackback_rdf.html" %}
<div id="abs">
  {% include "abs/extra_services.html" %}
  <div class="leftcolumn">
    <div class="subheader">
      <h1>{% if abs_meta.primary_archive.id != abs_meta.primary_category.id %}{{ abs_meta.primary_archive.name }} > {% endif %}{{ abs_meta.primary_category.name }}</h1>
    </div>
    {{ abs_macros.title(abs_meta) }} 
    <div class="authors"><span class="descriptor">Authors:</span>
      {%- include "abs/author_links.html" %}
    </div>

    <div class="dateline">{{ abs_macros.generate_dateline(abs_meta) }}</div>
    {{ abs_macros.abstract(abs_meta) }}
    <!--CONTEXT-->
    <div class="metatable">
      <table summary="Additional metadata">
        {{ abs_macros.comments(abs_meta) }}
        {{ abs_macros.subject(abs_meta) }}
        {{ abs_macros.msc_class(abs_meta) }}
        {{ abs_macros.amc_class(abs_meta) }}       
        {{ abs_macros.journal_ref(abs_meta) }}
        {{ abs_macros.doi(abs_meta) }}
        {{ abs_macros.report_number(abs_meta) }}
        {{ abs_macros.cite_as(abs_meta) }}
      </table>
    </div>
    {{ abs_macros.submission_history(abs_meta) }}
    <div class="endorsers"><a href="{{url_for('.show_endorsers',arxiv_id=abs_meta.arxiv_id)}}">Which authors of this paper are endorsers?</a> | <a id="mathjax_toggle" href="javascript:setMathjaxCookie()">Disable MathJax</a> (<a href="{{url_for('help_mathjax')}}">What is MathJax?</a>)</div>
    <script type="text/javascript" language="javascript">mathjaxToggle();</script>
    {#- The following supports the arXiv Labs Bibliographic Explorer project: https://labs.arxiv.org/projects/bibexplorer -#}
    {% if config['LABS_BIBEXPLORER_ENABLED'] %}
    <script src="/bibex/bibex.js?20181010" type="text/javascript" defer></script>
    {% endif %}
  </div>
  <!--end leftcolumn-->
</div>
{% endblock content %}

{%- macro generate_scholar_tags(abs_meta) -%}
{%- if meta_tags %}
    {%- for tag in meta_tags %}
  <meta name="{{tag.name}}" content="{{tag.content}}"/>
    {%- endfor -%}
{%- endif -%}
{%- endmacro -%}
