{% extends "base.html" %}

{% block title %}[{{ abs_meta.arxiv_id }}] {{ abs_meta.title }}{% endblock %}

{% block head %}
    {{ super() }}
    <script src="//static.arxiv.org/js/mathjaxToggle.min.js" type="text/javascript"></script>

    {# TODO: meta tags #}
    <!--
    <meta name="citation_title" content="Precise Time Delays from Chromatically Microlensed Type Ia Supernovae" />
    <meta name="citation_author" content="Goldstein, Daniel A." />
    <meta name="citation_author" content="Nugent, Peter E." />
    <meta name="citation_author" content="Kasen, Daniel N." />
    <meta name="citation_author" content="Collett, Thomas E." />
    <meta name="citation_date" content="2017/07/31" />
    <meta name="citation_online_date" content="2017/07/31" />
    <meta name="citation_pdf_url" content="http://arxiv.org/pdf/1708.00003" />
    <meta name="citation_arxiv_id" content="1708.00003" />
   -->

{% endblock head %}
{% block body_id %}{% endblock %}

{% block header_class %}{% endblock %}
{% block header %}
  <h1><a href="/">arXiv.org</a> &gt; <a href="/list/{{ abs_meta.primary_archive.id }}/recent">{{ abs_meta.primary_archive.id }}</a> &gt; arXiv:{{ abs_meta.arxiv_id }}</h1>
  <div id="search">
    <form id="search-arxiv" method="GET" action="/search">

      <div class="wrapper-search-arxiv">
        <input class="keyword-field" type="text" name="query" placeholder="Search or Article ID" />

        <div class="filter-field">
          <select name="searchtype">
            <option value="all" selected="selected">All papers</option>
            <option value="ti">Titles</option>
            <option value="au">Authors</option>
            <option value="abs">Abstracts</option>
            <option value="ft">Full text</option>
            <option value="help">Help pages</option>
          </select>
        </div>
        <input class="btn-search-arxiv" value="" type="submit">
        <div class="links">(<a href="/help">Help</a> | <a href="/find">Advanced search</a>)</div>
      </div>
    </form>
  </div>
{% endblock header %}

{% block content %}
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns:dc="http://purl.org/dc/elements/1.1/"
     xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
<rdf:Description
    rdf:about="http://arxiv.org/abs/1708.00003"
    dc:identifier="http://arxiv.org/abs/1708.00003"
    dc:title="Precise Time Delays from Chromatically Microlensed Type Ia Supernovae"
    trackback:ping="http://arxiv.org/trackback/1708.00003" />
</rdf:RDF>
-->

<div id="abs">
  {% include "abs/extra_services.html" %}
  <div class="leftcolumn">
    <div class="subheader">
      <h1>{% if abs_meta.primary_archive.id != abs_meta.primary_category.id %}{{ abs_meta.primary_archive.name }} > {% endif %}{{ abs_meta.primary_category.name }}</h1>
    </div>
    <h1 class="title mathjax"><span class="descriptor">Title:</span>{{ abs_meta.title }}</h1>
    {# TODO: authors section #}
    <div class="authors"><span class="descriptor">Authors:</span>
      <!-- <a href="/find/astro-ph/1/au:+Goldstein_D/0/1/0/all/0/1">Daniel A. Goldstein</a>,
      <a href="/find/astro-ph/1/au:+Nugent_P/0/1/0/all/0/1">Peter E. Nugent</a>,
      <a href="/find/astro-ph/1/au:+Kasen_D/0/1/0/all/0/1">Daniel N. Kasen</a>,
      <a href="/find/astro-ph/1/au:+Collett_T/0/1/0/all/0/1">Thomas E. Collett</a></div> -->
      {{ abs_meta.authors }}
    <div class="dateline">{{ generate_dateline() }}</div>

    <blockquote class="abstract mathjax"><span class="descriptor">Abstract:</span>{{ abs_meta.abstract }}</blockquote>
    <!--CONTEXT-->
    <div class="metatable">
      <table summary="Additional metadata">
        {% if abs_meta.comments %}
        <tr>
          <td class="tablecell label">Comments:</td>
          <td class="tablecell comments mathjax">{{ abs_meta.comments }}</td>
        </tr>
        {% endif %}
        <tr>
          <td class="tablecell label">Subjects:</td>
          <td class="tablecell subjects"><span class="primary-subject">{{ abs_meta.primary_category.name }} ({{ abs_meta.primary_category.id }})</span>{% if abs_meta.secondary_categories %}{% for category in abs_meta.secondary_categories %}; {{ category.name}} ({{ category.id }}){% endfor %}{% endif %}</td>
        </tr>
        {% if abs_meta.msc_class %}
        <tr>
          <td class="tablecell label"><abbr title="Mathematical Subject Classification">MSC</abbr> classes:</td>
          <td class="tablecell msc-classes">{{ abs_meta.msc_class }}</td>
        </tr>
        {% endif %}
        {% if abs_meta.acm_class %}
        <tr>
          <td class="tablecell label"><abbr title="Association of Computing Machinery Classification">ACM</abbr>&nbsp;classes:</td>
          <td class="tablecell acm-classes">{{ abs_meta.acm_class }}</td>
        </tr>
        {% endif %}
        {% if abs_meta.journal_ref %}
        <tr>
          <td class="tablecell label">Journal&nbsp;reference:</td>
          <td class="tablecell jref">{{ abs_meta.journal_ref }}</td>
        </tr>
        {% endif %}
        {% if abs_meta.doi %}
        <tr>
          <td class="tablecell label"><abbr title="Digital Object Identifier">DOI</abbr>:</td>
          <td class="tablecell msc_classes">TODO: link {{ abs_meta.doi }}</td>
        </tr>
        {% endif %}
        {% if abs_meta.report_num %}
        <tr>
          <td class="tablecell label">Report&nbsp;number:</td>
          <td class="tablecell jref">{{ abs_meta.report_num }}</td>
        </tr>
        {% endif %}
        <tr>
          <td class="tablecell label">Cite as:</td>
          <td class="tablecell arxivid"><a href="{{ url_for('browse.abstract', arxiv_id=abs_meta.arxiv_id) }}">arXiv:{{ abs_meta.arxiv_id }}</a> [{{ abs_meta.primary_category.id }}]</td>
        </tr>
        <tr>
          <td class="tablecell label">&nbsp;</td>
          <td class="tablecell arxividv">(or <span class="arxivid"><a href="{{ url_for('browse.abstract', arxiv_id=abs_meta.arxiv_id_v) }}">arXiv:{{ abs_meta.arxiv_id }}v{{ abs_meta.version }}</a> [{{ abs_meta.primary_category.id }}]</span> for this version)</td>
        </tr>
      </table>
    </div>
    <div class="submission-history">
      <h2>Submission history</h2> From: {{ abs_meta.submitter.name }} [<a href="https://arxiv.org/show-email/some_hash/paper_id">TODO view email</a>]
      <br/>
      {%- for version_entry in abs_meta.version_history -%}
      {{ generate_version_entry(version_entry, abs_meta.version) }}
      {%- endfor -%}
    </div>
    <div class="endorsers"><a href="https://arxiv.org/auth/show-endorsers/{{ abs_meta.arxiv_id }}">Which authors of this paper are endorsers?</a> | <a id="mathjax_toggle" href="javascript:setMathjaxCookie()">Disable MathJax</a> (<a href="/help/mathjax/">What is MathJax?</a>)</div>
    <script type="text/javascript" language="javascript">mathjaxToggle();</script>
  </div>
  <!--end leftcolumn-->
</div>
{% endblock content %}

{%- macro generate_version_entry(version_entry, this_version) %}
  {%- if version_entry.version == this_version -%}<b>[v{{ version_entry.version }}]</b> {% else %}<a href="{{ url_for('browse.abstract', arxiv_id='{}v{}'.format(abs_meta.arxiv_id, version_entry.version)) }}">[v{{ version_entry.version }}]</a> {% endif %}{{ version_entry.submitted_date.strftime('%a, %-d %b %Y %H:%M:%S %Z') }} ({{ version_entry.size_kilobytes }} KB)<br/>
{%- endmacro -%}

{%- macro generate_dateline() -%}
  (Submitted on {{ abs_meta.version_history[0].submitted_date.strftime('%-d %b %Y') }} (
  {%- if abs_meta.version == 1 %}this version{% else %}<a href="{{ url_for('browse.abstract', arxiv_id='{}v1'.format(abs_meta.arxiv_id)) }}">v1</a>{%- endif %})
  {%- if abs_meta.version > 1 and abs_meta.version < abs_meta.version_history[-1].version -%}
  , revised {{ abs_meta.version_history[abs_meta.version-1].submitted_date.strftime('%-d %b %Y') }} (this version, v{{ abs_meta.version }})
  {%- endif -%}
  {%- if abs_meta.version != abs_meta.version_history[-1].version -%}
  , <em>latest version {{ abs_meta.version_history[-1].submitted_date.strftime('%-d %b %Y') }}</em> (<a href="{{ url_for('browse.abstract', arxiv_id='{}v{}'.format(abs_meta.arxiv_id, abs_meta.version_history[-1].version)) }}">v{{ abs_meta.version_history[-1].version }}</a>)
  {%- elif abs_meta.version > 1 and abs_meta.version == abs_meta.version_history[-1].version -%}
  , last revised {{ abs_meta.version_history[-1].submitted_date.strftime('%-d %b %Y') }} (this version, v{{ abs_meta.version }})
  {%- endif -%}
  )
{%- endmacro -%}
